<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>2 Типы данных</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2013-01-10 13:49:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
   <div id="toplinks"> &lt;<a href="../index.html">Главная</a>&gt; &lt;<a href="symbols.html">Символы</a>&gt; <br />&#x003C;<a 
href="clmse3.html" >Далее</a>&#x003E;&#x003C;<a 
href="clmse2.html" >Назад</a>&#x003E;&#x003C;<a 
href="clmse2.html#tailclmse2.html" >Назад-и-вниз</a>&#x003E;&#x003C;<a 
href="#taildtypes.html">В-конец</a>&#x003E;&#x003C;<a 
href="clm.html#dtypes.html" >Наверх</a>&#x003E;</div><h2 class="chapterHead"><span class="titlemark">Глава 2</span><br /><a 
href="clm.html#QQ2-9-20" id="x9-150002">Типы
данных</a></h2><div class="chapterTOCS">
    <span class="sectionToc" >2.1 <a 
href="clmse3.html#x10-160002.1">Числа</a></span>
<br />     <span class="subsectionToc" >2.1.1 <a 
href="clmse3.html#x10-170002.1.1">Целые числа</a></span>
<br />     <span class="subsectionToc" >2.1.2 <a 
href="clmse3.html#x10-180002.1.2">Дробные числа</a></span>
<br />     <span class="subsectionToc" >2.1.3 <a 
href="clmse3.html#x10-190002.1.3">Числа с плавающей точкой</a></span>
<br />     <span class="subsectionToc" >2.1.4 <a 
href="clmse3.html#x10-200002.1.4">Комплексные числа</a></span>
<br />    <span class="sectionToc" >2.2 <a 
href="clmse4.html#x11-210002.2">Строковые символы</a></span>
<br />     <span class="subsectionToc" >2.2.1 <a 
href="clmse4.html#x11-220002.2.1">Стандартные строковые символы</a></span>
<br />     <span class="subsectionToc" >2.2.2 <a 
href="clmse4.html#x11-230002.2.2">Разделители строк</a></span>
<br />     <span class="subsectionToc" >2.2.3 <a 
href="clmse4.html#x11-240002.2.3">Нестандартные символы</a></span>
<br />    <span class="sectionToc" >2.3 <a 
href="clmse5.html#x12-250002.3">Символы</a></span>
<br />    <span class="sectionToc" >2.4 <a 
href="clmse6.html#x13-260002.4">Списки и Cons-ячейки</a></span>
<br />    <span class="sectionToc" >2.5 <a 
href="clmse7.html#x14-270002.5">Массивы</a></span>
<br />     <span class="subsectionToc" >2.5.1 <a 
href="clmse7.html#x14-280002.5.1">Векторы</a></span>
<br />     <span class="subsectionToc" >2.5.2 <a 
href="clmse7.html#x14-290002.5.2">Строки</a></span>
<br />     <span class="subsectionToc" >2.5.3 <a 
href="clmse7.html#x14-300002.5.3">Битовые векторы</a></span>
<br />    <span class="sectionToc" >2.6 <a 
href="clmse8.html#x15-310002.6">Хеш-таблицы</a></span>
<br />    <span class="sectionToc" >2.7 <a 
href="clmse9.html#x16-320002.7">Таблицы символов Lisp парсера (Readtables)</a></span>
<br />    <span class="sectionToc" >2.8 <a 
href="clmse10.html#x17-330002.8">Пакеты</a></span>
<br />    <span class="sectionToc" >2.9 <a 
href="clmse11.html#x18-340002.9">Имена файлов</a></span>
<br />    <span class="sectionToc" >2.10 <a 
href="clmse12.html#x19-350002.10">Потоки</a></span>
<br />    <span class="sectionToc" >2.11 <a 
href="clmse13.html#x20-360002.11">Состояние для генератора псевдослучайных чисел
(Random-States)</a></span>
<br />    <span class="sectionToc" >2.12 <a 
href="clmse14.html#x21-370002.12">Структуры</a></span>
<br />    <span class="sectionToc" >2.13 <a 
href="clmse15.html#x22-380002.13">Функции</a></span>
<br />    <span class="sectionToc" >2.14 <a 
href="clmse16.html#x23-390002.14">Нечитаемые объекты данных</a></span>
<br />    <span class="sectionToc" >2.15 <a 
href="clmse17.html#x24-400002.15">Пересечение, включение и дизъюнктивность типов</a></span>
   </div>
<!--l. 1537--><p class="indent" >   Common Lisp предоставляет множество типов для объектов данных.
Необходимо подчеркнуть, что в Lisp&#x2019;е типизированы данные, а не
переменные. Любая переменная может содержать данные любого типа.
(Можно указать явно, что некоторая переменная фактически может
содержать только один или конечное множество типов объектов.
Однако, такая декларация может быть опущена, и программа будет
выполняться корректно. Такая декларация содержит рекомендации от
                                                                          

                                                                          
пользователя, и это может быть полезным при оптимизации. Смотрите
<b><a 
href="symbols.html#x188-380307r307">declare</a></b>.)
<!--l. 1547--><p class="indent" >   В Common Lisp&#x2019;е тип данных является (возможно бесконечным)
множеством Lisp объектов. Многие объекты Lisp&#x2019;а принадлежат к более чем
одному множеству типов, так что иногда не имеет смысла спрашивать тип
объекта; вместо этого задаётся вопрос о принадлежности объекта к
нужному типу. Предикат <b><a 
href="symbols.html#x188-380976r976">typep</a></b> может использоваться для определения
принадлежности объекта к заданному типу, а функция <b><a 
href="symbols.html#x188-380974r974">type-of</a></b> возвращает
тип, к которому принадлежит заданный объект.
<!--l. 1556--><p class="indent" >   Типы данных в Common Lisp сложены в иерархию (фактически в порядке
убывания объёма) определённую отношениями подмножеств. Несомненно
множества объектов, такие как множество чисел и множество строк
заслуживают идентификаторов. Для многих этих идентификаторов
используются символы (здесь и далее, слово «символ» ссылается на тип
Lisp&#x2019;овых объектов символ, известный также как литеральный атом). См.
главу <a 
href="dtspec.html#x26-420004">4<!--tex4ht:ref: DTSPEC --></a> подробно описывающую определения типов.
<!--l. 1565--><p class="indent" >   Множество все объектов определяется символом <b><a 
href="symbols.html#x188-380951r951">t</a></b>. Пустой тип данных,
который не содержит объектов обозначается с помощью <b><a 
href="symbols.html#x188-380670r670">nil</a></b>.
<!--l. 1569--><p class="indent" >   Следующие категории объектов Common Lisp&#x2019;а в особенности интересны:
числа (numbers), знаки (characters), символы (symbols), списки (lists),
массивы (arrays), структуры (structures) и функции (functions). Другие типы
тоже, конечно, интересны. Некоторые из этих категорий имеют много
подразделов. Так же есть стандартные типы, которые определены как
объединение двух и более данных категорий. Вышеупомянутые категории,
являясь типами объектов, менее «реальны» чем другие типы данных. Они
просто составляют объединения типов для наглядности.
<!--l. 1579--><p class="indent" >   Вот краткое изложение различных Common Lisp&#x2019;овых типов данных.
Оставшиеся разделы данной главы рассматривают типы более детально, а
также описывают нотации для объектов для каждого типа. Описание
Lisp&#x2019;овых функций, что оперируют объектами данных каждого типа будет
даваться в следующих главах.
      <ul class="itemize1">
      <li class="itemize"><em>Числа</em> имеют различные формы и представления. Common Lisp
      предоставляет целочисленный (integer) тип данных: любое целое
      число, положительное или отрицательное ограничено размерами
      памяти  (преимущественно  равными  ширине  машинного  слова).
      Также  предоставляется  рациональный  или  дробный  (rational)
      тип  данных:  это  отношение  двух  целых  чисел,  не  являющееся
                                                                          

                                                                          
      целым числом. Также предоставляются числа с плавающей точкой
      различных интервалов и точностей. И наконец, в языке также есть
      комплексные числа.
      </li>
      <li class="itemize"><em>Строковые</em> символы представляют печатные символы, такие как
      буквы  или  управляющие  форматированием  символы.  Строки
      являются   одномерными   массивами   символов.   Common   Lisp
      предоставляет  богатое  множество  символов,  включая  способы
      представления различных стилей печати.
      </li>
      <li class="itemize"><em>Символы</em>  (иногда  для  ясности  называемые  <em>атомные  символы
      (atomic symbols)</em>) являются именованными объектами данных. Lisp
      предоставляет механизм определяющий местоположение объекта
      символа по заданному имени (в форме строки). У символов есть
      <em>списки  свойств</em>,  которые  фактически  позволяют  использовать
      символы в качестве структур, с расширяемым множеством имён
      полей,  каждое  из  которых  может  быть  любым  Lisp  объектом.
      Символы также служат для именования функций и переменных в
      программе.
      </li>
      <li class="itemize"><em>Списки</em>
      это последовательность, представленная в форме связанных ячеек,
      называемых  <em>cons-ячейками</em>.  Для  обозначения  пустого  списка
      служит  специальный  объект  (обозначаемый  символом  <b><a 
href="symbols.html#x188-380670r670">nil</a></b>).  Все
      остальные списки создаются рекурсивно, с помощью добавления
      новых элементов в начало существующего списка. Это происходит
      так:  создаётся  новая  cons-ячейка,  которая  является  объектом,
      имеющим  два  компонента,  называемых  <em>car</em>  и  <em>cdr</em>.  <em>Car</em>  может
      хранить,  что  угодно,  а  <em>cdr</em>  создан  для  хранения  указателя  на
      существующий ранее список. (Cons-ячейки могут использоваться
      для  хранения  записи  структуры  из  двух  элементов,  но  это  не
      главное их предназначение.)
      </li>
      <li class="itemize"><em>Массивы</em> - это n-мерные коллекции объектов. Массив может иметь
      любое неотрицательное количество измерений и индексироваться
                                                                          

                                                                          
      с помощью последовательности целых чисел. Общий тип массива
      может  содержать  любой  Lisp  объект.  Другие  типы  массивов
      специализируются для эффективности и могут содержать только
      определённые типы Lisp объектов. Также существует возможность
      того, что два массива, возможно с разным количеством измерений,
      указывают  на  одно  и  то  же  подмножество  объектов  (если
      изменить  первый  массив,  изменится  и  второй).  Это  достигается
      с  помощью  указания  для  одного  массива  <em>быть  связанным</em>  с
      другим массивом. Одномерные массивы любого типа называются
      <em>векторами  (vectors)</em>.  Одномерные  массивы  строковых  символов
      называются   <em>строки</em>.   Одномерные   массивы   битов   (это   целое
      число, которое может содержать 0 или 1) называются <em>битовыми
      векторами (bit-vectors)</em>.
      </li>
      <li class="itemize"><em>Хеш-таблицы</em>  предоставляют  эффективный  способ  связывания
      любого Lisp объекта (<em>ключа</em>) с другим объектом (<em>значением</em>).
      </li>
      <li class="itemize"><em>Таблицы
      символов Lisp парсера (readtables)</em> используются для управления
      парсером  выражений  <b><a 
href="symbols.html#x188-380778r778">read</a></b>.  Этот  функционал  предназначен  для
      создания макроридеров для ограниченного изменения синтаксиса
      языка.
      </li>
      <li class="itemize"><em>Пакеты</em> являются коллекциями символов и служат для разделения
      их на пространства имён. Парсер распознает символы с помощью
      поиска их имён в текущем пакете.
      </li>
      <li class="itemize"><em>Имена  файлов  (pathnames)</em>  хранят  в  себе  путь  к  файлу  в
      кроссплатформенном виде. Они используются для взаимодействия
      с внешней файловой системой.
      </li>
      <li class="itemize"><em>Потоки</em>  представляют  источники  данных,  обычно  строковых
      символов  или  байтов.  Они  используются  для  ввода/вывода,  а
      также для внутренних нужд, например для парсинга строк.
                                                                          

                                                                          
      </li>
      <li class="itemize"><em>Состояния  генератора  случайных  чисел  (random-states)</em>  —  это
      структуры   данных,   используемые   для   хранения   состояния
      встроенного генератора случайных чисел (ГСЧ).
      </li>
      <li class="itemize"><em>Структуры</em> — это определённые пользователем объекты, имеющие
      именованные поля. <b><a 
href="symbols.html#x188-380325r325">defstruct</a></b> используется для определения новых
      типов  структур.  Некоторые  реализации  Common  Lisp&#x2019;а  могут
      внутренне  предоставлять  некоторые  системные  типы  такие,  как
      <em>bignums</em>,  <em>таблицы  символов  Lisp  парсера  (readtables)</em>,  <em>потоки
      (streams)</em>, <em>хеш-таблицы (hash tables)</em> и <em>имена файлов (pathnames)</em>
      как структуры, но для пользователя это не имеет значения.
      </li>
      <li class="itemize"><em>Условия (conditions)</em> — это объекты, используемые для управления
      ходом выполнения программы с помощью сигналов и обработчиков
      этих  самых  сигналов.  В  частности,  ошибки  сигнализируются  с
      помощью генерации условия, и эти ошибки могут быть обработаны
      с помощью установленных для этих условий обработчиков.
      </li>
      <li class="itemize"><em>Классы</em>  определяют  структуру  и  поведение  других  объектов,
      являющихся  <em>экземплярами</em>  данных  классов.  Каждый  объект
      данных принадлежит некоторому классу.
      </li>
      <li class="itemize"><em>Методы</em>                                                                         —
      это код, который оперирует аргументами, которые соответствуют
      некоторому  шаблону.  Методы  не  являются  функциями;  они  не
      вызываются  напрямую,  а  объединяются  в  обобщённые  функции
      (generic functions).
      </li>
      <li class="itemize"><em>Обобщённые   функции</em>   —   это   функции,   которые   содержат,
      кроме  всего  прочего,  множество  методов.  При  вызове  generic
      функция  вызывает  подмножество  её  методов.  Подмножество
      для  выполнения  выделяется  с  помощью  определения  классов
      аргументов и выбора им соответствующих методов.</li></ul>
                                                                          

                                                                          
<!--l. 1707--><p class="indent" >   Эти категории не всегда взаимоисключаемы. Указанные отношения
между различными типами данных более детально описано в разделе <a 
href="clmse17.html#x24-400002.15">2.15<!--tex4ht:ref: DATA-TYPE-RELATIONSHIPS --></a>.















                                                                          

                                                                          
   <div id="bottomlinks">&#x003C;<a 
href="clmse3.html" >Далее</a>&#x003E;&#x003C;<a 
href="clmse2.html" >Назад</a>&#x003E;&#x003C;<a 
href="clmse2.html#tailclmse2.html" >Назад-и-вниз</a>&#x003E;&#x003C;<a 
href="dtypes.html" >В-начало</a>&#x003E;&#x003C;<a 
href="clm.html#dtypes.html" >Наверх</a>&#x003E;<br> &lt;<a href="../index.html">Главная</a>&gt; &lt;<a href="symbols.html">Символы</a>&gt;</div><a 
 id="taildtypes.html"></a>
 
</body></html> 
