<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//RU"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>Package System Functions and Variables</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- 3,next,fn-in,charset=utf-8,sections+,minitoc<,html --> 
<meta name="src" content="clm.tex"> 
<meta name="date" content="2013-01-10 13:48:00"> 
<link rel="stylesheet" type="text/css" href="clm.css"> 
<link rel="stylesheet" type="text/css" href="../cltl2ed.css"></head><body 
>
   <div id="toplinks"> &lt;<a href="../index.html">Main Page</a>&gt; &lt;<a href="symbols.html">Symbols</a>&gt; <br> &#x003C;<a 
href="number.html" >Next</a>&#x003E;&#x003C;<a 
href="clmse62.html" >Prev</a>&#x003E;&#x003C;<a 
href="clmse62.html#tailclmse62.html" >PrevTail</a>&#x003E;&#x003C;<a 
href="#tailclmse63.html">Tail</a>&#x003E;&#x003C;<a 
href="xpack.html#clmse63.html" >Up</a>&#x003E;</div><h3 class="sectionHead"><span class="titlemark">11.7   </span> <a 
href="clm.html#QQ2-79-125" id="x79-11600011.7">Package System Functions
and Variables</a></h3>
_____________________________________________________________<div class="implementation">
<!--l. 761--><p class="noindent" ><b>Implementation note:</b> In the past, some Lisp compilers have read the entire ﬁle into
Lisp before processing any of the forms. Other compilers have arranged for the loader to
do all of its intern operations before evaluating any of the top-level forms. Neither of
these techniques will work in a straightforward way in Common Lisp because of the
presence of multiple packages.
</div>___________________________________________________________________________________________________________
<!--l. 772--><p class="noindent" >For the functions described here, all optional arguments named <em>package</em> default to
the current value of <b><a 
href="symbols.html#x188-380032r32">*package*</a></b>. Where a function takes an argument that is
either a symbol or a list of symbols, an argument of <b><a 
href="symbols.html#x188-380670r670">nil</a></b> is treated as an empty list
of symbols. Any argument described as a package name may be either a
string or a symbol. If a symbol is supplied, its print name will be used
as the package name; if a string is supplied, the user must take care to
specify the same capitalization used in the package name, normally all
uppercase.
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116001"></a>
<em>
<!--l. 782--><p class="noindent" >[Variable]</em> <b>*package*</b>
</div>
<!--l. 784--><p class="indent" >    The value of this variable must be a package; this package is said
to be the current package. The initial value of <b><a 
href="symbols.html#x188-380032r32">*package*</a></b> is the <b>user</b>
package.
<!--l. 788--><p class="indent" >     The functions <b><a 
href="symbols.html#x188-380553r553">load</a></b> and <b><a 
href="symbols.html#x188-380261r261">compile-ﬁle</a></b> rebind <b><a 
href="symbols.html#x188-380032r32">*package*</a></b> to its current
value. If some form in the ﬁle changes the value of <b><a 
href="symbols.html#x188-380032r32">*package*</a></b> during
loading or compilation, the old value will be restored when the loading is
completed.
<hr></div>
                                                                          

                                                                          
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116002"></a>
<em>
<!--l. 794--><p class="noindent" >[Function]</em> <b>make-package</b> <i>package-name</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;key</a></tt> <i>:nicknames</i> <i>:use</i>
</div>
<!--l. 796--><p class="indent" >   This creates and returns a new package with the speciﬁed package name. As
described above, this argument may be either a string or a symbol. The
<b>:nicknames</b> argument must be a list of strings to be used as alternative names
for the package. Once again, the user may supply symbols in place of the strings,
in which case the print names of the symbols are used. These names and
nicknames must not conﬂict with any existing package names; if they do, a
correctable error is signaled.
<!--l. 805--><p class="indent" >   The <b>:use</b> argument is a list of packages or the names (strings or symbols) of
packages whose external symbols are to be inherited by the new package. These
packages must already exist. If not supplied, <b>:use</b> defaults to a list of one package,
the <b>lisp</b> package.
<hr></div>
<div class="defmac">
<div class="defmacheader">
<!--l. 812--><p class="indent" >   <div class="tabbing">
 <em>[Macro]</em> <b>in-package</b> <a 
 id="dx79-116003"></a>name
   <br>
<!--l. 813--><p class="noindent" ></div>
</div>
<!--l. 814--><p class="indent" >   This macro causes <b><a 
href="symbols.html#x188-380032r32">*package*</a></b> to be set to the package named <em>name</em>, which
must be a symbol or string. The <em>name</em> is not evaluated. An error is signaled if the
package does not already exist. Everything this macro does is also performed at
compile time if the call appears at top level.
<b>
<!--l. 820--><p class="indent" >   <a 
href="symbols.html#x188-380493r493">in-package</a></b> returns the new package, that is, the value of <b><a 
href="symbols.html#x188-380032r32">*package*</a></b> after
the operation has been executed.
<hr></div>
<div class="defun">
                                                                          

                                                                          
<div class="defunheader">
<a 
 id="dx79-116004"></a>
<em>
<!--l. 825--><p class="noindent" >[Function]</em> <b>ﬁnd-package</b> <i>name</i>
</div>
<!--l. 827--><p class="indent" >   The <em>name</em> must be a string that is the name or nickname for a package. This
argument may also be a symbol, in which case the symbol&#x2019;s print name is used.
The package with that name or nickname is returned; if no such package exists,
<b><a 
href="symbols.html#x188-380420r420">ﬁnd-package</a></b> returns <b><a 
href="symbols.html#x188-380670r670">nil</a></b>. The matching of names observes case (as in
<b><a 
href="symbols.html#x188-380926r926">string=</a></b>).
<em>
<!--l. 833--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116005"></a>
<em>
<!--l. 838--><p class="noindent" >[Function]</em> <b>package-name</b> <i>package</i>
</div>
<!--l. 840--><p class="indent" >   The argument must be a package. This function returns the string that names
that package.
<em>
<!--l. 843--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<b>
<!--l. 846--><p class="indent" >   <a 
href="symbols.html#x188-380707r707">package-name</a></b> returns <b><a 
href="symbols.html#x188-380670r670">nil</a></b> instead of the package if the package has been
removed. See <b><a 
href="symbols.html#x188-380334r334">delete-package</a></b>.
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116006"></a>
<em>
                                                                          

                                                                          
<!--l. 851--><p class="noindent" >[Function]</em> <b>package-nicknames</b> <i>package</i>
</div>
<!--l. 853--><p class="indent" >   The argument must be a package. This function returns the list of nickname
strings for that package, not including the primary name.
<em>
<!--l. 856--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116007"></a>
<em>
<!--l. 861--><p class="noindent" >[Function]</em> <b>rename-package</b> <i>package</i> <i>new-name</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>new-nicknames</i>
</div>
<!--l. 863--><p class="indent" >   The old name and all of the old nicknames of <em>package</em> are eliminated and are
replaced by <em>new-name</em> and <em>new-nicknames</em>. The <em>new-name</em> argument is a string or
symbol; the <em>new-nicknames</em> argument, which defaults to <b><a 
href="symbols.html#x188-380670r670">nil</a></b>, is a list of strings or
symbols.
<em>
<!--l. 868--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116008"></a>
<em>
<!--l. 873--><p class="noindent" >[Function]</em> <b>package-use-list</b> <i>package</i>
</div>
<!--l. 875--><p class="indent" >   A list of other packages used by the argument package is returned.
<em>
<!--l. 877--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
                                                                          

                                                                          
<div class="defunheader">
<a 
 id="dx79-116009"></a>
<em>
<!--l. 882--><p class="noindent" >[Function]</em> <b>package-used-by-list</b> <i>package</i>
</div>
<!--l. 884--><p class="indent" >   A list of other packages that use the argument package is returned.
<em>
<!--l. 886--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116010"></a>
<em>
<!--l. 891--><p class="noindent" >[Function]</em> <b>package-shadowing-symbols</b> <i>package</i>
</div>
<!--l. 893--><p class="indent" >   A list is returned of symbols that have been declared as shadowing symbols in
this package by <b><a 
href="symbols.html#x188-380848r848">shadow</a></b> or <b><a 
href="symbols.html#x188-380849r849">shadowing-import</a></b>. All symbols on this list are
present in the speciﬁed package.
<em>
<!--l. 897--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116011"></a>
<em>
<!--l. 902--><p class="noindent" >[Function]</em> <b>list-all-packages</b>
</div>
<!--l. 904--><p class="indent" >   This function returns a list of all packages that currently exist in the Lisp
system.
<hr></div>
<div class="defun">
                                                                          

                                                                          
<div class="defunheader">
<a 
 id="dx79-116012"></a>
<em>
<!--l. 909--><p class="noindent" >[Function]</em> <b>delete-package</b> <i>package</i>
</div>
<!--l. 911--><p class="indent" >   The <b><a 
href="symbols.html#x188-380334r334">delete-package</a></b> function deletes the speciﬁed <em>package</em> from all package
system data structures. The <em>package</em> argument may be either a package or the
name of a package.
<!--l. 915--><p class="indent" >   If <em>package</em> is a name but there is currently no package of that name, a
correctable error is signaled. Continuing from the error makes no deletion attempt
but merely returns <b><a 
href="symbols.html#x188-380670r670">nil</a></b> from the call to <b><a 
href="symbols.html#x188-380334r334">delete-package</a></b>.
<!--l. 920--><p class="indent" >   If <em>package</em> is a package object that has already been deleted, no error is
signaled and no deletion is attempted; instead, <b><a 
href="symbols.html#x188-380334r334">delete-package</a></b> immediately
returns <b><a 
href="symbols.html#x188-380670r670">nil</a></b>.
<!--l. 924--><p class="indent" >   If the package speciﬁed for deletion is currently used by other packages, a
correctable error is signaled. Continuing from this error, the eﬀect of the function
<b><a 
href="symbols.html#x188-380988r988">unuse-package</a></b> is performed on all such other packages so as to remove their
dependency on the speciﬁed package, after which <b><a 
href="symbols.html#x188-380334r334">delete-package</a></b> proceeds
to delete the speciﬁed package as if no other package had been using
it.
<!--l. 931--><p class="indent" >   If any symbol had the speciﬁed package as its home package before the call to
<b><a 
href="symbols.html#x188-380334r334">delete-package</a></b>, then its home package is unspeciﬁed (that is, the contents of its
package cell are unspeciﬁed) after the <b><a 
href="symbols.html#x188-380334r334">delete-package</a></b> operation has been
completed. Symbols in the deleted package are not modiﬁed in any other
way.
<!--l. 937--><p class="indent" >   The name and nicknames of the <em>package</em> cease to be recognized package
names. The package object is still a package, but anonymous; <b><a 
href="symbols.html#x188-380712r712">packagep</a></b> will be
true of it, but <b><a 
href="symbols.html#x188-380707r707">package-name</a></b> applied to it will return <b><a 
href="symbols.html#x188-380670r670">nil</a></b>.
<!--l. 941--><p class="indent" >   The eﬀect of any other package operation on a deleted package object is
undeﬁned. In particular, an attempt to locate a symbol within a deleted
package (using <b><a 
href="symbols.html#x188-380504r504">intern</a></b> or <b><a 
href="symbols.html#x188-380422r422">ﬁnd-symbol</a></b>, for example) will have unspeciﬁed
results.
<b>
<!--l. 946--><p class="indent" >   <a 
href="symbols.html#x188-380334r334">delete-package</a></b> returns <b><a 
href="symbols.html#x188-380953r953">t</a></b> if the deletion succeeds, and <b><a 
href="symbols.html#x188-380670r670">nil</a></b> otherwise.
<hr></div>
<div class="defun">
                                                                          

                                                                          
<div class="defunheader">
<a 
 id="dx79-116013"></a>
<em>
<!--l. 951--><p class="noindent" >[Function]</em> <b>intern</b> <i>string</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 953--><p class="indent" >   The <em>package</em>, which defaults to the current package, is searched for a symbol
with the name speciﬁed by the <em>string</em> argument. This search will include inherited
symbols, as described in section <a 
href="clmse60.html#x76-11300011.4">11.4<!--tex4ht:ref: EXPORT-IMPORT-SECTION --></a>. If a symbol with the speciﬁed name is
found, it is returned. If no such symbol is found, one is created and is installed in
the speciﬁed package as an internal symbol (as an external symbol if the package
is the <b>keyword</b> package); the speciﬁed package becomes the home package of the
created symbol.
<div class="newer">
<!--l. 964--><p class="indent" >   X3J13 voted in March 1989 <a 
 id="dx79-116014"></a>to specify that <b><a 
href="symbols.html#x188-380504r504">intern</a></b> may in eﬀect perform the
search using a copy of the argument string in which some or all of the
implementation-deﬁned attributes have been removed from the characters of the
string. It is implementation-dependent which attributes are removed.
</div>
<!--l. 972--><p class="indent" >   Two values are returned. The ﬁrst is the symbol that was found or created.
The second value is <b><a 
href="symbols.html#x188-380670r670">nil</a></b> if no pre-existing symbol was found, and takes on one of
three values if a symbol was found: <div class="indentdesc">
      <ul><li><b>
<b>:internal</b> </b></li>The symbol was directly present in the package as an internal symbol.
      <li><b>
<b>:external</b> </b></li>The symbol was directly present as an external symbol.
      <li><b>
<b>:inherited</b> </b></li>The symbol was inherited via <b><a 
href="symbols.html#x188-380997r997">use-package</a></b> (which implies that the
      symbol is internal).</ul>
</div>
<em>
<!--l. 987--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
                                                                          

                                                                          
<div class="defunheader">
<a 
 id="dx79-116015"></a>
<em>
<!--l. 992--><p class="noindent" >[Function]</em> <b>ﬁnd-symbol</b> <i>string</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 994--><p class="indent" >   This is identical to <b><a 
href="symbols.html#x188-380504r504">intern</a></b>, but it never creates a new symbol. If a symbol with
the speciﬁed name is found in the speciﬁed package, directly or by inheritance, the
symbol found is returned as the ﬁrst value and the second value is as speciﬁed for
<b><a 
href="symbols.html#x188-380504r504">intern</a></b>. If the symbol is not accessible in the speciﬁed package, both values are
<b><a 
href="symbols.html#x188-380670r670">nil</a></b>.
<em>
<!--l. 1001--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116016"></a>
<em>
<!--l. 1006--><p class="noindent" >[Function]</em> <b>unintern</b> <i>symbol</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 1008--><p class="indent" >   If the speciﬁed symbol is present in the speciﬁed <em>package</em>, it is removed from
that package and also from the package&#x2019;s shadowing-symbols list if it is present
there. Moreover, if the <em>package</em> is the home package for the symbol, the
symbol is made to have no home package. Note that in some circumstances
the symbol may continue to be accessible in the speciﬁed package by
inheritance. <b><a 
href="symbols.html#x188-380982r982">unintern</a></b> returns <b><a 
href="symbols.html#x188-380953r953">t</a></b> if it actually removed a symbol, and <b><a 
href="symbols.html#x188-380670r670">nil</a></b>
otherwise.
<b>
<!--l. 1017--><p class="indent" >   <a 
href="symbols.html#x188-380982r982">unintern</a></b> should be used with caution. It changes the state of the package
system in such a way that the consistency rules do not hold across the
change.
<em>
<!--l. 1021--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
                                                                          

                                                                          
<div class="defunheader">
<a 
 id="dx79-116017"></a>
<em>
<!--l. 1026--><p class="noindent" >[Function]</em> <b>export</b> <i>symbols</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 1028--><p class="indent" >   The <em>symbols</em> argument should be a list of symbols, or possibly a single symbol.
These symbols become accessible as external symbols in <em>package</em> (see
section <a 
href="clmse60.html#x76-11300011.4">11.4<!--tex4ht:ref: EXPORT-IMPORT-SECTION --></a>). <b><a 
href="symbols.html#x188-380391r391">export</a></b> returns <b><a 
href="symbols.html#x188-380953r953">t</a></b>.
<!--l. 1033--><p class="indent" >   By convention, a call to <b><a 
href="symbols.html#x188-380391r391">export</a></b> listing all exported symbols is placed near the
start of a ﬁle to advertise which of the symbols mentioned in the ﬁle are intended
to be used by other programs.
<em>
<!--l. 1037--><p class="indent" >   package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116018"></a>
<em>
<!--l. 1042--><p class="noindent" >[Function]</em> <b>unexport</b> <i>symbols</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 1044--><p class="indent" >   The <em>symbols</em> argument should be a list of symbols, or possibly a single symbol.
These symbols become internal symbols in <em>package</em>. It is an error to unexport a
symbol from the <b>keyword</b> package (see section <a 
href="clmse60.html#x76-11300011.4">11.4<!--tex4ht:ref: EXPORT-IMPORT-SECTION --></a>). <b><a 
href="symbols.html#x188-380981r981">unexport</a></b> returns
<b><a 
href="symbols.html#x188-380953r953">t</a></b>.
<!--l. 1050--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116019"></a>
<em>
<!--l. 1055--><p class="noindent" >[Function]</em> <b>import</b> <i>symbols</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
                                                                          

                                                                          
</div>
<!--l. 1057--><p class="indent" >   The argument should be a list of symbols, or possibly a single symbol. These
symbols become internal symbols in <em>package</em> and can therefore be referred to
without having to use qualiﬁed-name (colon) syntax. <b><a 
href="symbols.html#x188-380492r492">import</a></b> signals a correctable
error if any of the imported symbols has the same name as some distinct
symbol already accessible in the package (see section <a 
href="clmse60.html#x76-11300011.4">11.4<!--tex4ht:ref: EXPORT-IMPORT-SECTION --></a>). <b><a 
href="symbols.html#x188-380492r492">import</a></b> returns
<b><a 
href="symbols.html#x188-380953r953">t</a></b>.
<!--l. 1066--><p class="indent" >   If any symbol to be imported has no home package then <b><a 
href="symbols.html#x188-380492r492">import</a></b> sets the
home package of the symbol to the <em>package</em> to which the symbol is being
imported.
<!--l. 1070--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116020"></a>
<em>
<!--l. 1075--><p class="noindent" >[Function]</em> <b>shadowing-import</b> <i>symbols</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 1077--><p class="indent" >   This is like <b><a 
href="symbols.html#x188-380492r492">import</a></b>, but it does not signal an error even if the importation of a
symbol would shadow some symbol already accessible in the package. In addition
to being imported, the symbol is placed on the shadowing-symbols list of <em>package</em>
(see section <a 
href="clmse61.html#x77-11400011.5">11.5<!--tex4ht:ref: NAME-CONFLICTS-SECTION --></a>). <b><a 
href="symbols.html#x188-380849r849">shadowing-import</a></b> returns <b><a 
href="symbols.html#x188-380953r953">t</a></b>.
<b>
<!--l. 1084--><p class="indent" >   <a 
href="symbols.html#x188-380849r849">shadowing-import</a></b> should be used with caution. It changes the state of the
package system in such a way that the consistency rules do not hold across the
change.
<!--l. 1088--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116021"></a>
<em>
                                                                          

                                                                          
<!--l. 1093--><p class="noindent" >[Function]</em> <b>shadow</b> <i>symbols</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 1095--><p class="indent" >   The argument should be a list of symbols, or possibly a single symbol. The
print name of each symbol is extracted, and the speciﬁed <em>package</em> is searched for a
symbol of that name. If such a symbol is present in this package (directly, not by
inheritance), then nothing is done. Otherwise, a new symbol is created with this
print name, and it is inserted in the <em>package</em> as an internal symbol. The symbol is
also placed on the shadowing-symbols list of the <em>package</em> (see section <a 
href="clmse61.html#x77-11400011.5">11.5<!--tex4ht:ref: NAME-CONFLICTS-SECTION --></a>).
<b><a 
href="symbols.html#x188-380848r848">shadow</a></b> returns <b><a 
href="symbols.html#x188-380953r953">t</a></b>.
<b>
<!--l. 1105--><p class="indent" >   <a 
href="symbols.html#x188-380848r848">shadow</a></b> should be used with caution. It changes the state of the package
system in such a way that the consistency rules do not hold across the
change.
<!--l. 1109--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116022"></a>
<em>
<!--l. 1114--><p class="noindent" >[Function]</em> <b>use-package</b> <i>packages-to-use</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 1116--><p class="indent" >   The <em>packages-to-use</em> argument should be a list of packages or package names,
or possibly a single package or package name. These packages are added to the
use-list of <em>package</em> if they are not there already. All external symbols in the
packages to use become accessible in <em>package</em> as internal symbols (see
section <a 
href="clmse60.html#x76-11300011.4">11.4<!--tex4ht:ref: EXPORT-IMPORT-SECTION --></a>). It is an error to try to use the <b>keyword</b> package. <b><a 
href="symbols.html#x188-380997r997">use-package</a></b>
returns <b><a 
href="symbols.html#x188-380953r953">t</a></b>.
<!--l. 1125--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116023"></a>
                                                                          

                                                                          
<em>
<!--l. 1130--><p class="noindent" >[Function]</em> <b>unuse-package</b> <i>packages-to-unuse</i> <tt><a 
href="clmse29.html#x39-620005.2.2">&#x0026;optional</a></tt> <i>package</i>
</div>
<!--l. 1132--><p class="indent" >   The <em>packages-to-unuse</em> argument should be a list of packages or package
names, or possibly a single package or package name. These packages are removed
from the use-list of <em>package</em>. <b><a 
href="symbols.html#x188-380988r988">unuse-package</a></b> returns <b><a 
href="symbols.html#x188-380953r953">t</a></b>.
<!--l. 1137--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<hr></div>
<div class="defmac">
<div class="defmacheader">
<!--l. 1142--><p class="indent" >   <div class="tabbing">
 <em>[Macro]</em> <b>defpackage</b> <a 
 id="dx79-116024"></a>deﬁned-package-name {option}*
   <br>
<!--l. 1143--><p class="noindent" ></div>
</div>
<!--l. 1144--><p class="indent" >   This creates a new package, or modiﬁes an existing one, whose name is
<em>deﬁned-package-name</em>. The <em>deﬁned-package-name</em> may be a string or a symbol; if
it is a symbol, only its print name matters, and not what package, if any, the
symbol happens to be in. The newly created or modiﬁed package is returned as
the value of the <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> form.
<!--l. 1152--><p class="indent" >   Each standard <em>option</em> is a list of a keyword (the name of the option) and
associated arguments. No part of a <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> form is evaluated. Except for the
<b>:size</b> option, more than one option of the same kind may occur within the same
<b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> form.
<!--l. 1157--><p class="indent" >   The standard options for <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> are as follows. In every case, any option
argument called <em>package-name</em> or <em>symbol-name</em> may be a string or a symbol; if it
is a symbol, only its print name matters, and not what package, if any, the symbol
happens to be in.
<div class="flushdesc">
      <ul><li><b>
<b>(:size <em>integer</em>)</b> </b></li>This   speciﬁes   approximately   the   number   of   symbols
      expected to be in the package. This is purely an eﬃciency hint to the
      storage allocator, so that implementations using hash tables as part
                                                                          

                                                                          
      of the package data structure (the usual technique) will not have to
      incrementally expand the package as new symbols are added to it (for
      example, as a large ﬁle is read while “in” that package).
      <li><b>
<b>(:nicknames  {<i><em></em></i>}* package-name)</b> </b></li>The speciﬁed names become nicknames
      of the package being deﬁned. If any of the speciﬁed nicknames already
      refers to an existing package, a continuable error is signaled exactly as
      for the function <b><a 
href="symbols.html#x188-380601r601">make-package</a></b>.
      <li><b>
<b>(:shadow  {<i><em></em></i>}* symbol-name)</b> </b></li>Symbols  with  the  speciﬁed  names  are
      created  as  shadows  in  the  package  being  deﬁned,  just  as  with  the
      function <b><a 
href="symbols.html#x188-380848r848">shadow</a></b>.
      <li><b>
<b>(:shadowing-import-from <em>package-name</em> {<i><em></em></i>}* symbol-name)</b> </b></li>
      Symbols  with  the  speciﬁed  names  are  located  in  the  speciﬁed
      package. These symbols are imported into the package being deﬁned,
      shadowing  other  symbols  if  necessary,  just  as  with  the  function
      <b><a 
href="symbols.html#x188-380849r849">shadowing-import</a></b>. In no case will symbols be created in a package
      other than the one being deﬁned; a continuable error is signaled if for
      any <em>symbol-name</em> there is no symbol of that name accessible in the
      package named <em>package-name</em>.
      <li><b>
<b>(:use  {<i><em></em></i>}* package-name)</b> </b></li>The  package  being  deﬁned  is  made  to  “use”
      (inherit from) the packages speciﬁed by this option, just as with the
      function <b><a 
href="symbols.html#x188-380997r997">use-package</a></b>. If no <b>:use</b> option is supplied, then option is
      unspeciﬁed.
      <li><b>
<b>(:import-from <em>package-name</em> {<i><em></em></i>}* symbol-name)</b> </b></li>Symbols   with   the
      speciﬁed names are located in the speciﬁed package. These symbols
      are imported into the package being deﬁned, just as with the function
      <b><a 
href="symbols.html#x188-380492r492">import</a></b>. In no case will symbols be created in a package other than the
      one being deﬁned; a continuable error is signaled if for any <em>symbol-name</em>
      there  is  no  symbol  of  that  name  accessible  in  the  package  named
      <em>package-name</em>.
                                                                          

                                                                          
      <li><b>
<b>(:intern  {<i><em></em></i>}* symbol-name)</b> </b></li>Symbols with the speciﬁed names are located
      or  created  in  the  package  being  deﬁned,  just  as  with  the  function
      <b><a 
href="symbols.html#x188-380504r504">intern</a></b>.  Note  that  the  action  of  this  option  may  be  aﬀected  by  a
      <b>:use</b> option, because an inherited symbol will be used in preference to
      creating a new one.
      <li><b>
<b>(:export  {<i><em></em></i>}* symbol-name)</b> </b></li>Symbols   with   the   speciﬁed   names   are
      located or created in the package being deﬁned and then exported, just
      as with the function <b><a 
href="symbols.html#x188-380391r391">export</a></b>. Note that the action of this option may
      be aﬀected by a <b>:use</b>, <b>:import-from</b>, or <b>:shadowing-import-from</b>
      option,  because  an  inherited  or  imported  symbol  will  be  used  in
      preference to creating a new one.</ul>
</div>
<!--l. 1224--><p class="indent" >   The order in which options appear in a <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> form does not matter;
part of the convenience of <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> is that it sorts out the options into the
correct order for processing. Options are processed in the following order:
<div class="tabbing">
1.  <b>:shadow</b> and <b>:shadowing-import-from</b>
   <br>                  2.  <b>:use</b><br>                  3.  <b>:import-from</b> and <b>:intern</b><br>
4.  <b>:export</b><br>
<!--l. 1233--><p class="noindent" ></div>Shadows are established ﬁrst in order to avoid spurious name conﬂicts when use links
are established. Use links must occur before importing and interning so that those
operations may refer to normally inherited symbols rather than creating new ones.
Exports are performed last so that symbols created by any of the other
options, in particular, shadows and imported symbols, may be exported.
Note that exporting an inherited symbol implicitly imports it ﬁrst (see
section <a 
href="clmse60.html#x76-11300011.4">11.4<!--tex4ht:ref: EXPORT-IMPORT-SECTION --></a>).
<!--l. 1243--><p class="indent" >   If no package named <em>deﬁned-package-name</em> already exists, <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> creates
it. If such a package does already exist, then no new package is created. The
existing package is modiﬁed, if possible, to reﬂect the new deﬁnition. The results
are undeﬁned if the new deﬁnition is not consistent with the current state of the
package.
                                                                          

                                                                          
<!--l. 1250--><p class="indent" >   An error is signaled if more than one <b>:size</b> option appears. Если опция <b>:size</b>
указана более одного раза сигнализируется ошибка.
<!--l. 1253--><p class="indent" >   An error is signaled if the same <b><a 
href="symbols.html#x188-380947r947">symbol-name</a></b> argument (in the sense of
comparing names with <b><a 
href="symbols.html#x188-380926r926">string=</a></b>) appears more than once among the arguments to
all the <b>:shadow</b>, <b>:shadowing-import-from</b>, <b>:import-from</b>, and <b>:intern</b>
options.
<!--l. 1258--><p class="indent" >   An error is signaled if the same <b><a 
href="symbols.html#x188-380947r947">symbol-name</a></b> argument (in the sense of
comparing names with <b><a 
href="symbols.html#x188-380926r926">string=</a></b>) appears more than once among the arguments to
all the <b>:intern</b> and <b>:export</b> options.
<!--l. 1262--><p class="indent" >   Other kinds of name conﬂicts are handled in the same manner that the
underlying operations <b><a 
href="symbols.html#x188-380997r997">use-package</a></b>, <b><a 
href="symbols.html#x188-380492r492">import</a></b>, and <b><a 
href="symbols.html#x188-380391r391">export</a></b> would handle
them.
<!--l. 1266--><p class="indent" >   Implementations may support other <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> options. Every implementation
should signal an error on encountering a <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> option it does not
support.
<!--l. 1270--><p class="indent" >   The function <b><a 
href="symbols.html#x188-380261r261">compile-ﬁle</a></b> should treat top-level <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> forms in the
same way it would treat top-level calls to package-aﬀecting functions (as described
at the beginning of section <a 
href="#x79-11600011.7">11.7<!--tex4ht:ref: PACKAGE-FUNCTIONS-SECTION --></a>).
<!--l. 1275--><p class="indent" >   Here is an example of a call to <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> that “plays it safe” by using only
strings as names. <div class="lisp"><tt><div class="tabbing">
(cl:defpackage &#x0022;MY-VERY-OWN-PACKAGE&#x0022;
   <br>         (:size 496)<br>         (:nicknames &#x0022;MY-PKG&#x0022; &#x0022;MYPKG&#x0022; &#x0022;MVOP&#x0022;)<br>
  (:use &#x0022;COMMON-LISP&#x0022;)<br>                     (:shadow &#x0022;CAR&#x0022; &#x0022;CDR&#x0022;)<br>
  (:shadowing-import-from &#x0022;BRAND-X-LISP&#x0022; &#x0022;CONS&#x0022;)<br>
  (:import-from &#x0022;BRAND-X-LISP&#x0022; &#x0022;GC&#x0022; &#x0022;BLINK-FRONT-PANEL-LIGHTS&#x0022;)<br>
  (:export &#x0022;EQ&#x0022; &#x0022;CONS&#x0022; &#x0022;MY-VERY-OWN-FUNCTION&#x0022;))<br>
<!--l. 1286--><p class="noindent" ></div>
</tt>
</div>
<!--l. 1287--><p class="indent" >   The preceding <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> example is designed to operate correctly even if
the package current when the form is read happens not to “use” the <b>common-lisp</b>
package. (Note the use in this example of the nickname <b>cl</b> for the <b>common-lisp</b>
package.) Moreover, neither reading in nor evaluating this <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> form will
ever create any symbols in the current package. Note too the use of uppercase
letters in the strings.
                                                                          

                                                                          
<!--l. 1295--><p class="indent" >   Here, for the sake of contrast, is a rather similar use of <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> that “plays
the whale” by using all sorts of permissible syntax. <div class="lisp"><tt><div class="tabbing">
(defpackage my-very-own-package
   <br>                      (:export :EQ common-lisp:cons my-very-own-function)<br>
  (:nicknames &#x0022;MY-PKG&#x0022; #:MyPkg)<br>           (:use &#x0022;COMMON-LISP&#x0022;)<br>
  (:shadow &#x0022;CAR&#x0022;)<br>             (:size 496)<br>             (:nicknames mvop)<br>
  (:import-from &#x0022;BRAND-X-LISP&#x0022; &#x0022;GC&#x0022; Blink-Front-Panel-Lights)<br>
  (:shadow common-lisp::cdr)<br>
  (:shadowing-import-from &#x0022;BRAND-X-LISP&#x0022; CONS))<br>
<!--l. 1309--><p class="noindent" ></div>
</tt>
</div>
<!--l. 1310--><p class="indent" >   This example has exactly the same eﬀect on the newly created package but
may create useless symbols in other packages. The use of explicit package tags is
particularly confusing; for example, this <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> form will cause the symbol
<b><a 
href="symbols.html#x188-380209r209">cdr</a></b> to be shadowed <em>in the new package</em>; it will not be shadowed in the
package <b>common-lisp</b>. The fact that the name “<b>CDR</b>” was speciﬁed by a
package-qualiﬁed reference to a symbol in the <b>common-lisp</b> package is a red
herring. The moral is that the syntactic ﬂexibility of <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b>, as in other
parts of Common Lisp, yields considerable convenience when used with
commonsense competence, but unutterable confusion when used with Malthusian
profusion.
_________________________________________________________________<div class="implementation">
<!--l. 1324--><p class="noindent" ><b>Implementation note:</b> An implementation of <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> might choose to transform
all the <em>package-name</em> and <em>symbol-name</em> arguments into strings at macro expansion time,
rather than at the time the resulting expansion is executed, so that even if source code is
expressed in terms of strange symbols in the <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> form, the binary ﬁle resulting
from compiling the source code would contain only strings. The purpose of this is simply
to minimize the creation of useless symbols in production code. This technique is
permitted as an implementation strategy but is not a behavior required by the
speciﬁcation of <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b>.
</div>___________________________________________________________________________________________________________
<!--l. 1338--><p class="indent" >     Note that <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> is not capable by itself of deﬁning mutually recursive
                                                                          

                                                                          
packages, for example two packages each of which uses the other. However,
nothing prevents one from using <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> to perform much of the initial setup
and then using functions such as <b><a 
href="symbols.html#x188-380997r997">use-package</a></b>, <b><a 
href="symbols.html#x188-380492r492">import</a></b>, and <b><a 
href="symbols.html#x188-380391r391">export</a></b> to complete
the links.
<!--l. 1345--><p class="indent" >   The purpose of <b><a 
href="symbols.html#x188-380322r322">defpackage</a></b> is to encourage the user to put the entire
deﬁnition of a package and its relationships to other packages in a single place. It
may also encourage the designer of a large system to place the deﬁnitions of all
relevant packages into a single ﬁle (say) that can be loaded before loading
or compiling any code that depends on those packages. Such a ﬁle, if
carefully constructed, can simply be loaded into the <b>common-lisp-user</b>
package.
<!--l. 1353--><p class="indent" >   Implementations and programming environments may also be better able to
support the programming process (if only by providing better error checking)
through global knowledge of the intended package setup.
<hr></div>
<div class="defun">
<div class="defunheader">
<a 
 id="dx79-116025"></a>
<em>
<!--l. 1359--><p class="noindent" >[Function]</em> <b>ﬁnd-all-symbols</b> <i>string-or-symbol</i>
</div>
<b>
<!--l. 1361--><p class="indent" >   <a 
href="symbols.html#x188-380414r414">ﬁnd-all-symbols</a></b> searches every package in the Lisp system to ﬁnd every
symbol whose print name is the speciﬁed string. A list of all such symbols found is
returned. This search is case-sensitive. If the argument is a symbol, its print name
supplies the string to be searched for.
<hr></div>
<div class="defmac">
<div class="defmacheader">
<!--l. 1371--><p class="indent" >   <div class="tabbing">
 <em>[Macro]</em> <b>do-symbols</b> <a 
 id="dx79-116026"></a>(var [package [result-form]]){declaration}* {tag | statement}*
   <br>
<!--l. 1373--><p class="noindent" ></div>
</div>
                                                                          

                                                                          
<b>
<!--l. 1374--><p class="indent" >   <a 
href="symbols.html#x188-380351r351">do-symbols</a></b> provides straightforward iteration over the symbols of a
package. The body is performed once for each symbol accessible in the
<em>package</em>, in no particular order, with the variable <em>var</em> bound to the symbol.
Then <em>result-form</em> (a single form, <em>not</em> an implicit <b><a 
href="symbols.html#x188-380762r762">progn</a></b>) is evaluated, and
the result is the value of the <b><a 
href="symbols.html#x188-380351r351">do-symbols</a></b> form. (When the <em>result-form</em>
is evaluated, the control variable <em>var</em> is still bound and has the value
<b><a 
href="symbols.html#x188-380670r670">nil</a></b>.) If the <em>result-form</em> is omitted, the result is <b><a 
href="symbols.html#x188-380670r670">nil</a></b>. <b><a 
href="symbols.html#x188-380817r817">return</a></b> may be used
to terminate the iteration prematurely. If execution of the body aﬀects
which symbols are contained in the <em>package</em>, other than possibly to remove
the symbol currently the value of <em>var</em> by using <b><a 
href="symbols.html#x188-380982r982">unintern</a></b>, the eﬀects are
unpredictable.
<!--l. 1387--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<div class="new">
<!--l. 1391--><p class="indent" >   X3J13 voted in March 1988 <a 
 id="dx79-116027"></a>to specify that the body of a <b><a 
href="symbols.html#x188-380351r351">do-symbols</a></b> form
may be executed more than once for the same accessible symbol, and users should
take care to allow for this possibility.
<!--l. 1397--><p class="indent" >   The point is that the same symbol might be accessible via more than one
chain of inheritance, and it is implementationally costly to eliminate such
duplicates. Here is an example: <div class="lisp"><tt><div class="tabbing">
(setq *a* (make-package &#x2019;a))      ;Implicitly uses package <b>common-lisp</b>
   <br>(setq *b* (make-package &#x2019;b))      ;Implicitly uses package <b>common-lisp</b><br>
(setq *c* (make-package &#x2019;c :use &#x2019;(a b)))<br>                                    <br>
(do-symbols (x *c*) (print x))    ;Symbols in package <b>common-lisp</b><br>
                                  ; might be printed once or twice here<br>
<!--l. 1407--><p class="noindent" ></div>
</tt>
</div>
<!--l. 1409--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx79-116028"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-900007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div> <div class="new"> Note that the <b><a 
href="symbols.html#x188-380577r577">loop</a></b> construct provides a kind of <b><a 
href="symbols.html#x188-380436r436">for</a></b> clause that can iterate over
the symbols of a package (see chapter <a 
href="loop.html#x154-22600025">25<!--tex4ht:ref: LOOP --></a>).
</div>
<hr></div>
<div class="defmac">
                                                                          

                                                                          
<div class="defmacheader">
<!--l. 1420--><p class="indent" >   <div class="tabbing">
 <em>[Macro]</em> <b>do-external-symbols</b> <a 
 id="dx79-116029"></a>(var [package [result]]){declaration}* {tag | statement}*
   <br>
<!--l. 1422--><p class="noindent" ></div>
</div>
<b>
<!--l. 1423--><p class="indent" >   <a 
href="symbols.html#x188-380350r350">do-external-symbols</a></b> is just like <b><a 
href="symbols.html#x188-380351r351">do-symbols</a></b>, except that only the external
symbols of the speciﬁed package are scanned.
<div class="new">
<!--l. 1427--><p class="indent" >   The clariﬁcation voted by X3J13 in March 1988 for <b><a 
href="symbols.html#x188-380351r351">do-symbols</a></b> <a 
 id="dx79-116030"></a>, regarding
redundant executions of the body for the same symbol, applies also to
<b><a 
href="symbols.html#x188-380350r350">do-external-symbols</a></b>.
</div>
<!--l. 1434--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<div class="new">
<!--l. 1438--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx79-116031"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-900007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
<hr></div>
<div class="defmac">
<div class="defmacheader">
<!--l. 1445--><p class="indent" >   <div class="tabbing">
 <em>[Macro]</em> <b>do-all-symbols</b> <a 
 id="dx79-116032"></a>(var [result-form]){declaration}* {tag | statement}*
   <br>
<!--l. 1447--><p class="noindent" ></div>
</div>
<!--l. 1448--><p class="indent" >   This is similar to <b><a 
href="symbols.html#x188-380351r351">do-symbols</a></b> but executes the body once for every symbol
contained in every package. (This will not process every symbol whatsoever,
because a symbol not accessible in any package will not be processed. Normally,
uninterned symbols are not accessible in any package.) It is <em>not</em> in general the case
that each symbol is processed only once, because a symbol may appear in many
packages.
<div class="new">
                                                                          

                                                                          
<!--l. 1457--><p class="indent" >   The clariﬁcation voted by X3J13 in March 1988 for <b><a 
href="symbols.html#x188-380351r351">do-symbols</a></b> <a 
 id="dx79-116033"></a>, regarding
redundant executions of the body for the same symbol, applies also to
<b><a 
href="symbols.html#x188-380349r349">do-all-symbols</a></b>.
</div>
<!--l. 1464--><p class="indent" >   The <em>package</em> argument may be either a package object or a package name (see
section <a 
href="clmse58.html#x74-11100011.2">11.2<!--tex4ht:ref: PACKAGE-NAMES-SECTION --></a>).
<div class="new">
<!--l. 1468--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx79-116034"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-900007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
</div>
<hr></div>
<div class="defmac">
<div class="defmacheader">
<!--l. 1475--><p class="indent" >   <div class="tabbing">
 <em>[Macro]</em> <b>with-package-iterator</b> <a 
 id="dx79-116035"></a>(mname package-list {symbol-type}+){form}*
   <br>
<!--l. 1477--><p class="noindent" ></div>
</div>
<!--l. 1478--><p class="indent" >   The name <em>mname</em> is bound and deﬁned as if by <b><a 
href="symbols.html#x188-380587r587">macrolet</a></b>, with the body
<em>form</em>s as its lexical scope, to be a “generator macro” such that each invocation of
<b>(<em>mname</em>)</b> will return a symbol and that successive invocations will eventually
deliver, one by one, all the symbols from the packages that are elements of the list
that is the value of the expression <em>package-list</em> (which is evaluated exactly
once).
<!--l. 1486--><p class="indent" >   Each element of the <em>package-list</em> value may be either a package or the name of
a package. As a further convenience, if the <em>package-list</em> value is itself a package or
the name of a package, it is treated as if a singleton list containing that value had
been provided. If the <em>package-list</em> value is <b><a 
href="symbols.html#x188-380670r670">nil</a></b>, it is considered to be an empty list
of packages.
<!--l. 1494--><p class="indent" >   At each invocation of the generator macro, there are two possibilities. If there
is yet another unprocessed symbol, then four values are returned: <b><a 
href="symbols.html#x188-380953r953">t</a></b>, the symbol, a
keyword indicating the accessibility of the symbol within the package (see below),
and the package from which the symbol was accessed. If there are no more
unprocessed symbols in the list of packages, then one value is returned:
<b><a 
href="symbols.html#x188-380670r670">nil</a></b>.
<!--l. 1503--><p class="indent" >   When the generator macro returns a symbol as its second value, the fourth
value is always one of the packages present or named in the <em>package-list</em>
                                                                          

                                                                          
value, and the third value is a keyword indicating accessibility: <b>:internal</b>
means present in the package and not exported; <b>:external</b> means present
and exported; and <b>:inherited</b> means not present (thus not shadowed)
but inherited from some package used by the package that is the fourth
value.
<!--l. 1512--><p class="indent" >   Each <em>symbol-type</em> in an invocation of <b><a 
href="symbols.html#x188-381023r1023">with-package-iterator</a></b> is not evaluated.
More than one may be present; their order does not matter. They indicate the
accessibility types of interest. A symbol is not returned by the generator macro
unless its actual accessibility matches one of the <em>symbol-type</em> indicators. The
standard <em>symbol-type</em> indicators are <b>:internal</b>, <b>:external</b>, and <b>:inherited</b>, but
implementations are permitted to extend the syntax of <b><a 
href="symbols.html#x188-381023r1023">with-package-iterator</a></b>
by recognizing additional symbol accessibility types. An error is signaled if no
<em>symbol-type</em> is supplied, or if any supplied <em>symbol-type</em> is not recognized by the
implementation.
<!--l. 1524--><p class="indent" >   The order in which symbols are produced by successive invocations of the
generator macro is not necessarily correlated in any way with the order of the
packages in the <em>package-list</em>. When more than one package is in the <em>package-list</em>,
symbols accessible from more than one package may be produced once or more
than once. Even when only one package is speciﬁed, symbols inherited in
multiple ways via used packages may be produced once or more than
once.
<!--l. 1533--><p class="indent" >   The implicit interior state of the iteration over the list of packages and
the symbols within them has dynamic extent. It is an error to invoke
the generator macro once the <b><a 
href="symbols.html#x188-381023r1023">with-package-iterator</a></b> form has been
exited.
<!--l. 1538--><p class="indent" >   Any number of invocations of <b><a 
href="symbols.html#x188-381023r1023">with-package-iterator</a></b> and related macros
may be nested, and the generator macro of an outer invocation may be called
from within an inner invocation (provided, of course, that its name is visible or
otherwise made available).
<!--l. 1543--><p class="indent" >   X3J13 voted in January 1989 <a 
 id="dx79-116036"></a>to restrict user side eﬀects; see section <a 
href="clmse43.html#x55-900007.9">7.9<!--tex4ht:ref: STRUCTURE-TRAVERSAL-SECTION --></a>.
__________________________________________________________________________<div class="rationale">
<!--l. 1548--><p class="noindent" ><b>Rationale:</b> This facility is a bit more ﬂexible in some ways than <b><a 
href="symbols.html#x188-380351r351">do-symbols</a></b> and
friends. In particular, it makes it possible to implement <b><a 
href="symbols.html#x188-380577r577">loop</a></b> clauses for iterating over
packages in a way that is both portable and eﬃcient (see chapter <a 
href="loop.html#x154-22600025">25<!--tex4ht:ref: LOOP --></a>).
</div>___________________________________________________________________________________________________________
<hr>
</div>
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
                                                                          

                                                                          
<!--l. 15--><p class="indent" >   <div id="bottomlinks">&#x003C;<a 
href="number.html" >Next</a>&#x003E;&#x003C;<a 
href="clmse62.html" >Prev</a>&#x003E;&#x003C;<a 
href="clmse62.html#tailclmse62.html" >PrevTail</a>&#x003E;&#x003C;<a 
href="clmse63.html" >Front</a>&#x003E;&#x003C;<a 
href="xpack.html#clmse63.html" >Up</a>&#x003E;<br>&lt;<a href="../index.html">Main Page</a>&gt; &lt;<a href="symbols.html">Symbols</a>&gt; </div><a 
 id="tailclmse63.html"></a>  
</body></html> 
